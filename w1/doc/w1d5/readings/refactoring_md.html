<!DOCTYPE html>

<html>
<head>
<meta charset="UTF-8">

<title>refactoring - RDoc Documentation</title>

<script type="text/javascript">
  var rdoc_rel_prefix = "../../";
</script>

<script src="../../js/jquery.js"></script>
<script src="../../js/darkfish.js"></script>

<link href="../../css/fonts.css" rel="stylesheet">
<link href="../../css/rdoc.css" rel="stylesheet">



<body id="top" role="document" class="file">
<nav role="navigation">
  <div id="project-navigation">
    <div id="home-section" role="region" title="Quick navigation" class="nav-section">
  <h2>
    <a href="../../index.html" rel="home">Home</a>
  </h2>

  <div id="table-of-contents-navigation">
    <a href="../../table_of_contents.html#pages">Pages</a>
    <a href="../../table_of_contents.html#classes">Classes</a>
    <a href="../../table_of_contents.html#methods">Methods</a>
  </div>
</div>

    <div id="search-section" role="search" class="project-section initially-hidden">
  <form action="#" method="get" accept-charset="utf-8">
    <div id="search-field-wrapper">
      <input id="search-field" role="combobox" aria-label="Search"
             aria-autocomplete="list" aria-controls="search-results"
             type="text" name="search" placeholder="Search" spellcheck="false"
             title="Type to search, Up and Down to navigate, Enter to load">
    </div>

    <ul id="search-results" aria-label="Search Results"
        aria-busy="false" aria-expanded="false"
        aria-atomic="false" class="initially-hidden"></ul>
  </form>
</div>

  </div>

  
<div class="nav-section">
  <h3>Table of Contents</h3>

  <ul class="link-list" role="directory">
    <li><a href="#label-Refactoring+-28code+smells-29">Refactoring (code smells)</a>
    <li><a href="#label-Clean+Code">Clean Code</a>
    <li><a href="#label-Further+Reading">Further Reading</a>
  </ul>
</div>


  <div id="project-metadata">
    <div id="fileindex-section" class="nav-section">
  <h3>Pages</h3>

  <ul class="link-list">
  
    <li><a href="../../README_md.html">README</a>
  
    <li><a href="../../pass-by-reference_md.html">pass-by-reference</a>
  
    <li><a href="../../w1d1/exercises/Gemfile.html">Gemfile</a>
  
    <li><a href="../../w1d1/exercises/Gemfile_lock.html">Gemfile.lock</a>
  
    <li><a href="../../w1d1/readings/array_md.html">array</a>
  
    <li><a href="../../w1d1/readings/method_md.html">method</a>
  
    <li><a href="../../w1d1/readings/object_md.html">object</a>
  
    <li><a href="../../w1d1/readings/rspec_md.html">rspec</a>
  
    <li><a href="../../w1d1/readings/string_md.html">string</a>
  
    <li><a href="../../w1d2/exercises/Gemfile.html">Gemfile</a>
  
    <li><a href="../../w1d2/exercises/Gemfile_lock.html">Gemfile.lock</a>
  
    <li><a href="../../w1d2/readings/block_md.html">block</a>
  
    <li><a href="../../w1d2/readings/enumerable_md.html">enumerable</a>
  
    <li><a href="../../w1d2/readings/iteration_md.html">iteration</a>
  
    <li><a href="../../w1d3/exercises/Gemfile.html">Gemfile</a>
  
    <li><a href="../../w1d3/exercises/Gemfile_lock.html">Gemfile.lock</a>
  
    <li><a href="../../w1d3/readings/class-i_md.html">class-i</a>
  
    <li><a href="../../w1d3/readings/hash_md.html">hash</a>
  
    <li><a href="../../w1d4/exercises/Gemfile.html">Gemfile</a>
  
    <li><a href="../../w1d4/exercises/Gemfile_lock.html">Gemfile.lock</a>
  
    <li><a href="../../w1d4/readings/class-ii_md.html">class-ii</a>
  
    <li><a href="../../w1d4/readings/scope_md.html">scope</a>
  
    <li><a href="../../w1d5/readings/coding-style_md.html">coding-style</a>
  
    <li><a href="../../w1d5/readings/debugger_md.html">debugger</a>
  
    <li><a href="../../w1d5/readings/dry_md.html">dry</a>
  
    <li><a href="../../w1d5/readings/method-decomposition_md.html">method-decomposition</a>
  
    <li><a href="../../w1d5/readings/naming_md.html">naming</a>
  
    <li><a href="../../w1d5/readings/refactoring_md.html">refactoring</a>
  
  </ul>
</div>

  </div>
</nav>

<main role="main" aria-label="Page w1d5/readings/refactoring.md">

<h1 id="label-Refactoring+-28code+smells-29">Refactoring (code smells)<span><a href="#label-Refactoring+-28code+smells-29">&para;</a> <a href="#top">&uarr;</a></span></h1>

<p>From the <a href="http://en.wikipedia.org/wiki/Code_smell">Wiki</a>:</p>

<blockquote>
<p>A code smell is any symptom in the source code of a program that possibly
indicates a deeper problem. Code smells are usually not bugs — they are not
technically incorrect and don&#39;t currently prevent the program from
functioning. Instead, they indicate weaknesses in design that may be
slowing down development or increasing the risk of bugs or failures in the
future … a code smell is a driver for refactoring.</p>
</blockquote>

<p>We list a few kinds of smells here here:</p>

<p><strong>Duplicated/similar code</strong>: see the <a
href="../w1d2/style/dry.md">reading</a> on DRY code.</p>

<p><strong>Long methods</strong>: see the <a
href="../w1d2/style/method-decomposition.md">reading</a> on method
decomposition.</p>

<p><strong>Too many parameters</strong>: The more parameters a method has, the
greater the chance that it is too coupled to code that invokes it. Many
parameters may also be a sign of an excessively complex method.</p>

<p><strong>Data clump</strong>: if you see a group of data always being passed
around together, this is usually a good candidate for refactoring out into
an object. For example <code>start_date</code> and <code>end_date</code>
might be pulled out into a <code>date_range</code> object.</p>

<p><strong>Long method chains</strong>: long method chains can often be a sign
that you&#39;re violating the <a
href="http://en.wikipedia.org/wiki/Law_Of_Demeter">Law of Demeter</a>: only
talk to your “neighbors”, only use one dot.</p>

<pre class="ruby"><span class="ruby-identifier">bicycle</span>.<span class="ruby-identifier">front_tire</span>.<span class="ruby-identifier">rotate</span>
<span class="ruby-identifier">bicycle</span>.<span class="ruby-identifier">rear_tire</span>.<span class="ruby-identifier">rotate</span>

<span class="ruby-comment"># vs</span>
<span class="ruby-identifier">bicycle</span>.<span class="ruby-identifier">rotate_tires</span>
</pre>

<p>The idea is that instead of reaching into objects (like the
<code>bicycle</code>) and calling methods on their “internals”
(<code>front_tire</code> and <code>rear_tire</code>), we should create a
method that will take care of this for us (<code>rotate_tires</code>). This
helps us organize our code, and prevents us from becoming too dependent on
the internal structure of other objects.</p>

<p>LoD has disadvantages (see the wiki article); if taken too literally you
end up with overly wide interfaces. However, the longer your method chains
get, the more likely you should apply LoD.</p>

<p><strong>Indecent Exposure</strong>: Classes should share the bare minimum
interface with the outside world. If you don&#39;t have a compelling reason
to make a method or variable public, hide it. Other classes will interact
with the public surface of the class; any change to the public surface will
necessitate changes to interacting classes. Minimizing exposure will better
enable change.</p>

<p><a href="http://en.wikipedia.org/wiki/Coupling_(computer_programming)">From
the wiki page:</a> “Coupling (dependency) is the degree to which each
program module relies on each one of the other modules.”</p>

<p>Indecent exposure may result in coupling that is too tight. The more
extensive your classes&#39; interface, the more tightly other classes can
latch on to it.</p>

<p>A complicated interface can also signal a class that is doing too much.
Probably there&#39;s an opportunity to break out responsibilities to other
classes.</p>

<p>We want to minimize the amount of coupling between our classes and objects.
To understand how tightly coupled your classes are, ask yourself if you
changed the internals of one class, would you have to change things in the
other? If you do, you&#39;ve likely coupled the two classes too tightly.</p>

<p><strong>Speculative Generality</strong>: Follow the principle of <a
href="http://en.wikipedia.org/wiki/You_ain't_gonna_need_it">YAGNI</a>
(&#39;You ain&#39;t gonna need it&#39;). New devs often waste time thinking
of all the ways they might “generalize” their code so that it&#39;s easy to
make this change or that change, so that they can support all sorts of new
features easily, etc., etc. This can result in a very complicated design,
before any business need for those features even exists.</p>

<p>More importantly, it is very, very hard to get a speculative design like
this right. Good design happens when there are clear requirements and
concrete examples to think about; it&#39;s hard to make a perfect design
for some hazy, poorly understood future. Don&#39;t solve <em>abstract</em>
problems: wait until you have a <em>concrete</em> problem.</p>

<p><strong>God object</strong>: A god object is one that is very tightly
connected to all the other objects in the system. Good OO design results in
classes that are lightly coupled. A good class delegates responsibility as
necessary to other objects; it shouldn&#39;t need to know everything about
what every other object is doing (omniscience), and it shouldn&#39;t
micromanage how other objects manage their responsibilities. Nothing in
your program usually needs to even know about the existence of everything
else.</p>

<p><strong>Dead code</strong>: don&#39;t leave commented-out (or otherwise
unused) code in your code base. This is why we have version control
(we&#39;ll learn about git soon!). Clean up after yourself!</p>

<h2 id="label-Clean+Code">Clean Code<span><a href="#label-Clean+Code">&para;</a> <a href="#top">&uarr;</a></span></h2>

<p>When push comes to shove, sometimes you need to make compromises; when
deadlines hit, we all ship code we aren&#39;t 100% proud of. Still,
endeavor to write clean code. Pay attention to style. Pay attention to code
organization. Pay attention to code smells. Refactor often and
aggressively. Bask in the beauty of clean code. Take pride in it.</p>

<h2 id="label-Further+Reading">Further Reading<span><a href="#label-Further+Reading">&para;</a> <a href="#top">&uarr;</a></span></h2>
<ul><li>
<p>Enjoy watching Ben Orenstein&#39;s classic talk:  <a
href="http://www.confreaks.com/videos/1233-aloharuby2012-refactoring-from-good-to-great">Refactoring:
From Good to Great</a>.</p>
</li></ul>
</main>



<footer id="validator-badges" role="contentinfo">
  <p><a href="http://validator.w3.org/check/referer">Validate</a>
  <p>Generated by <a href="http://docs.seattlerb.org/rdoc/">RDoc</a> 4.2.1.
  <p>Based on <a href="http://deveiate.org/projects/Darkfish-RDoc/">Darkfish</a> by <a href="http://deveiate.org">Michael Granger</a>.
</footer>

